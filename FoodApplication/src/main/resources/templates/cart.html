<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Your Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">üç¥ FoodApp</a>
        <div class="d-flex">
            <a href="/" class="btn btn-outline-light">Back to Menu</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h2 class="mb-4 text-center">üõí Your Shopping Cart</h2>

    <div th:if="${#lists.isEmpty(cart.items)}" class="alert alert-info text-center">
        Your cart is empty. <a href="/" class="alert-link">Go back to menu</a>.
    </div>

    <div th:if="${!#lists.isEmpty(cart.items)}">
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Food</th>
                    <th>Price (‚Çπ)</th>
                    <th>Quantity</th>
                    <th>Subtotal (‚Çπ)</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${cart.items}">
                    <td th:text="${item.foodName}"></td>
                    <td th:text="${item.price}"></td>
                    <td th:text="${item.quantity}"></td>
                    <td th:text="${item.price * item.quantity}"></td>
                </tr>
            </tbody>
        </table>

        <div class="row">
            <div class="col-md-6 offset-md-6">
                <ul class="list-group mb-3">
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Tax</span>
                        <strong>‚Çπ <span th:text="${cart.tax}"></span></strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Delivery Charge</span>
                        <strong>‚Çπ <span th:text="${cart.deliveryCharge}"></span></strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between bg-light">
                        <span>Total</span>
                        <strong class="text-success fs-5">‚Çπ <span th:text="${cart.total}"></span></strong>
                    </li>
                </ul>
            </div>
        </div>

        <div class="mb-3">
            <form th:action="@{/cart/instructions}" method="post">
                <label for="instructions" class="form-label">Special Instructions</label>
                <textarea id="instructions" name="instructions" class="form-control" rows="3"
                          placeholder="E.g., Less spicy, extra cheese..."></textarea>
                <button type="submit" class="btn btn-info mt-2">Save Instructions</button>
            </form>
        </div>

        <div class="alert alert-secondary" th:if="${cart.specialInstructions}">
            <strong>Saved Instructions:</strong> <span th:text="${cart.specialInstructions}"></span>
        </div>

        <div class="text-end">
            <button class="btn btn-success">Proceed to Checkout</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
